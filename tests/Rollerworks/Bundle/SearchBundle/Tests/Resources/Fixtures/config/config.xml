<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:rollerworks-search="http://rollerworks.github.io/schema/search/sf-dic/rollerworks-search"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd
                        http://rollerworks.github.io/schema/search/sf-dic/rollerworks-search http://rollerworks.github.io/schema/search/sf-dic/rollerworks-search/rollerworks-search-1.0.xsd">

    <rollerworks-search:config>

        <rollerworks-search:doctrine>
            <rollerworks-search:orm cache-driver="null">
                <rollerworks-search:entity-manager>default</rollerworks-search:entity-manager>
                <rollerworks-search:entity-manager>secure</rollerworks-search:entity-manager>
            </rollerworks-search:orm>
        </rollerworks-search:doctrine>

        <rollerworks-search:metadata cache-dir="none" cache-driver="memory" auto-mapping="false">
            <rollerworks-search:mapping name="AcmeUser" dir="Resource/search/" prefix="Model\" is-bundle="true" />
        </rollerworks-search:metadata>

        <rollerworks-search:fieldset name="field1">
            <rollerworks-search:field name="id" type="integer" model-class="stdClass" model-property="id" />
            <rollerworks-search:field name="group" type="text" model-class="stdClass" model-property="group" required="false" />

            <rollerworks-search:import class="Model\User">
                <rollerworks-search:include-field>name</rollerworks-search:include-field>
                <rollerworks-search:include-field>date</rollerworks-search:include-field>
            </rollerworks-search:import>
        </rollerworks-search:fieldset>

        <rollerworks-search:fieldset name="field2">
            <rollerworks-search:field name="id" type="integer" model-class="stdClass" model-property="id" />
            <rollerworks-search:field name="group" type="text" model-class="stdClass" model-property="group">
                <rollerworks-search:option key="max">10</rollerworks-search:option>
                <rollerworks-search:option key="foo">null</rollerworks-search:option>

                <!-- Test with one value, and multiple to ensure the normalizer works properly -->
                <rollerworks-search:option key="bar" type="collection">
                    <rollerworks-search:option key="foo">null</rollerworks-search:option>
                    <rollerworks-search:option key="0">100</rollerworks-search:option>
                </rollerworks-search:option>

                <rollerworks-search:option key="doctor" type="collection">
                    <rollerworks-search:option key="name">who</rollerworks-search:option>
                </rollerworks-search:option>
            </rollerworks-search:field>

            <rollerworks-search:import class="Model\User">
                <rollerworks-search:include-field>name</rollerworks-search:include-field>
            </rollerworks-search:import>
        </rollerworks-search:fieldset>
    </rollerworks-search:config>
</container>
